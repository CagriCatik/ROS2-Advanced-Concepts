"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9126],{8560:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"intro/node-template","title":"OOP Template Node","description":"This tutorial will guide you through various aspects of ROS2, providing you with the necessary packages and templates to get started quickly. We will focus on more complex topics and assume that you have a basic understanding of ROS2, including how to create a package and write basic nodes. If you find any part of the initial code confusing, consider revisiting the basic concepts before proceeding with this course.","source":"@site/docs/01_intro/03_node-template.md","sourceDirName":"01_intro","slug":"/intro/node-template","permalink":"/ROS2-Advanced-Concepts/docs/intro/node-template","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01_intro/03_node-template.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"introSidebar","previous":{"title":"Installing and Setting Up ROS2","permalink":"/ROS2-Advanced-Concepts/docs/intro/setup"}}');var t=s(4848),o=s(8453);const c={},r="OOP Template Node",l={},a=[{value:"Getting Started",id:"getting-started",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Using the Node Templates",id:"using-the-node-templates",level:2},{value:"Python Node Template",id:"python-node-template",level:3},{value:"Key Components:",id:"key-components",level:4},{value:"C++ Node Template",id:"c-node-template",level:3},{value:"Key Components:",id:"key-components-1",level:4},{value:"Course Outline",id:"course-outline",level:2},{value:"Advanced Topics in ROS2 Communication",id:"advanced-topics-in-ros2-communication",level:3},{value:"Custom Messages and Services",id:"custom-messages-and-services",level:4},{value:"ROS2 Lifecycle Management",id:"ros2-lifecycle-management",level:3},{value:"Integrating ROS2 with Docker",id:"integrating-ros2-with-docker",level:3},{value:"ROS2 and Web Technologies",id:"ros2-and-web-technologies",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"oop-template-node",children:"OOP Template Node"})}),"\n",(0,t.jsx)(n.p,{children:"This tutorial will guide you through various aspects of ROS2, providing you with the necessary packages and templates to get started quickly. We will focus on more complex topics and assume that you have a basic understanding of ROS2, including how to create a package and write basic nodes. If you find any part of the initial code confusing, consider revisiting the basic concepts before proceeding with this course."}),"\n",(0,t.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Before diving into this tutorial, ensure you have the following prerequisites:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Basic knowledge of ROS2 and its core concepts."}),"\n",(0,t.jsx)(n.li,{children:"Experience in creating and managing ROS2 packages."}),"\n",(0,t.jsx)(n.li,{children:"Familiarity with Python and C++ programming languages."}),"\n",(0,t.jsx)(n.li,{children:"Understanding of Object-Oriented Programming (OOP) principles."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"using-the-node-templates",children:"Using the Node Templates"}),"\n",(0,t.jsx)(n.p,{children:"To streamline the process of writing nodes, we will use templates that encapsulate the essential setup code. This section will show you how to use these templates for both Python and C++ nodes."}),"\n",(0,t.jsx)(n.h3,{id:"python-node-template",children:"Python Node Template"}),"\n",(0,t.jsx)(n.p,{children:"The Python node template is structured to initialize ROS2 communication, create a node object, and manage the node's lifecycle. Here's an overview of the template:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('my_node')\n        self.get_logger().info('Node has been started')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h4,{id:"key-components",children:"Key Components:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Main Function:"})," Initializes ROS2, creates a node object, spins the node, and shuts down ROS2 communication."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Node Class:"})," Inherits from ",(0,t.jsx)(n.code,{children:"Node"}),", calls the superclass constructor, and logs a message when the node starts."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To use this template, modify the class name and node name as needed."}),"\n",(0,t.jsx)(n.h3,{id:"c-node-template",children:"C++ Node Template"}),"\n",(0,t.jsx)(n.p,{children:"The C++ node template follows a similar structure, initializing ROS2 communication, creating a node object, and managing its lifecycle. Here's the template:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include "rclcpp/rclcpp.hpp"\n\nclass MyNode : public rclcpp::Node {\npublic:\n    MyNode() : Node("my_node") {\n        RCLCPP_INFO(this->get_logger(), "Node has been started");\n    }\n};\n\nint main(int argc, char **argv) {\n    rclcpp::init(argc, argv);\n    auto node = std::make_shared<MyNode>();\n    rclcpp::spin(node);\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"key-components-1",children:"Key Components:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Main Function:"})," Initializes ROS2, creates a node object, spins the node, and shuts down ROS2 communication."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Node Class:"})," Inherits from ",(0,t.jsx)(n.code,{children:"rclcpp::Node"}),", calls the superclass constructor, and logs a message when the node starts."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To use this template, modify the class name and node name as needed."}),"\n",(0,t.jsx)(n.h2,{id:"course-outline",children:"Course Outline"}),"\n",(0,t.jsx)(n.p,{children:"This course will cover the following topics in a step-by-step, hands-on manner:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advanced Topics in ROS2 Communication:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Custom messages and services"}),"\n",(0,t.jsx)(n.li,{children:"Actions"}),"\n",(0,t.jsx)(n.li,{children:"Using parameters and dynamic reconfigure"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"ROS2 Lifecycle Management:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Managing node lifecycle"}),"\n",(0,t.jsx)(n.li,{children:"Lifecycle nodes and state transitions"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Integrating ROS2 with Docker:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Setting up a ROS2 environment with Docker"}),"\n",(0,t.jsx)(n.li,{children:"Building and deploying ROS2 applications using Docker"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"ROS2 and Web Technologies:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Integrating ROS2 with web interfaces"}),"\n",(0,t.jsx)(n.li,{children:"Using ROS2 with WebSockets and HTTP"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Performance Optimization:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Profiling and optimizing ROS2 nodes"}),"\n",(0,t.jsx)(n.li,{children:"Best practices for efficient ROS2 development"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"advanced-topics-in-ros2-communication",children:"Advanced Topics in ROS2 Communication"}),"\n",(0,t.jsx)(n.h4,{id:"custom-messages-and-services",children:"Custom Messages and Services"}),"\n",(0,t.jsx)(n.p,{children:"Creating custom messages and services allows you to define specific data structures and communication patterns tailored to your application's needs."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a Custom Message:"}),"\nDefine your custom message in a ",(0,t.jsx)(n.code,{children:".msg"})," file inside the ",(0,t.jsx)(n.code,{children:"msg"})," directory of your package."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-msg",children:"# MyCustomMessage.msg\nint32 id\nstring name\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a Custom Service:"}),"\nDefine your custom service in a ",(0,t.jsx)(n.code,{children:".srv"})," file inside the ",(0,t.jsx)(n.code,{children:"srv"})," directory of your package."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-srv",children:"# MyCustomService.srv\nint32 id\n---\nstring result\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build and Use Custom Messages and Services:"}),"\nUpdate your ",(0,t.jsx)(n.code,{children:"CMakeLists.txt"})," and ",(0,t.jsx)(n.code,{children:"package.xml"})," to include the custom messages and services. Then, build your package and use the custom types in your nodes."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ros2-lifecycle-management",children:"ROS2 Lifecycle Management"}),"\n",(0,t.jsx)(n.p,{children:"Lifecycle management in ROS2 provides a standardized way to control the state of nodes, allowing for better resource management and predictable behavior."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a Lifecycle Node:"}),"\nImplement a node that follows the lifecycle management protocol."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include "rclcpp_lifecycle/lifecycle_node.hpp"\n\nclass MyLifecycleNode : public rclcpp_lifecycle::LifecycleNode {\npublic:\n    MyLifecycleNode() : LifecycleNode("my_lifecycle_node") {}\n\n    // Implement lifecycle transition callbacks\n};\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Manage State Transitions:"}),"\nUse lifecycle transition services to control the node's state."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:"auto node = std::make_shared<MyLifecycleNode>();\nrclcpp::spin(node->get_node_base_interface());\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"integrating-ros2-with-docker",children:"Integrating ROS2 with Docker"}),"\n",(0,t.jsx)(n.p,{children:"Using Docker with ROS2 helps in creating consistent development environments and simplifies deployment."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Setup a Dockerfile:"}),"\nCreate a Dockerfile to set up your ROS2 environment."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:"FROM ros:foxy\nRUN apt-get update && apt-get install -y \\\n    python3-colcon-common-extensions\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build and Run Docker Container:"}),"\nBuild and run your Docker container with ROS2."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"docker build -t ros2_foxy .\ndocker run -it --rm ros2_foxy\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ros2-and-web-technologies",children:"ROS2 and Web Technologies"}),"\n",(0,t.jsx)(n.p,{children:"Integrate ROS2 with web technologies to create interactive web interfaces for your robots."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Setup ROS2 with WebSockets:"}),"\nUse the ",(0,t.jsx)(n.code,{children:"rosbridge_suite"})," package to communicate with ROS2 via WebSockets."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"ros2 launch rosbridge_server rosbridge_websocket_launch.xml\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a Web Interface:"}),"\nDevelop a web interface using HTML, CSS, and JavaScript to interact with ROS2 topics and services."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(n.p,{children:"Optimizing the performance of your ROS2 nodes ensures efficient use of resources and better application performance."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Profile Your Nodes:"}),"\nUse profiling tools to identify bottlenecks in your nodes."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"ros2 run my_package my_node --ros-args --log-level debug\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Optimize Code:"}),"\nApply best practices for efficient ROS2 development, such as minimizing callback durations and using efficient data structures."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var i=s(6540);const t={},o=i.createContext(t);function c(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);